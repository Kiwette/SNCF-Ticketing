<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNCF TICKETING</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/CSS/page_contacts.css" />
    <script src="/JS/page_contacts.js"></script>
    <script>
        function showAlert() {
            alert("Bienvenue sur la page CONTACTS, SNCF Ticketing!");
        }

        window.onload = function () {
            showAlert();
        };

        // Validation du formulaire
        function validateForm() {
            const nom = document.getElementById('nom').value;
            const prenom = document.getElementById('prenom').value;
            const cp = document.getElementById('cp').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;

            if (nom === "" || prenom === "" || cp === "" || email === "" || message === "") {
                alert("Tous les champs doivent être remplis avant l'envoi.");
                return false;
            }
            alert("Votre demande a été envoyée avec succès, nous vous répondrons dans les plus brefs délais !");
            return true;
        }

        // AJAX pour l'envoi du formulaire sans rechargement de la page
        document.getElementById('contactForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Empêche l'envoi classique du formulaire

            const formData = new FormData(this);

            // Envoi de la requête AJAX
            fetch('process_form.php', {
                method: 'POST',
                body: formData
            })
                .then(response => response.text())
                .then(data => {
                    alert(data);  // Affiche la réponse du serveur
                })
                .catch(error => {
                    alert("Une erreur est survenue : " + error);
                });
        });

        // Compteur de caractères
        const message = document.getElementById('message');
        const maxChars = 400;
        const counter = document.createElement('div');
        counter.id = 'charCounter';
        counter.innerHTML = `0/${maxChars}`;
        message.parentNode.appendChild(counter);

        message.addEventListener('input', function () {
            const charCount = message.value.length;
            counter.innerHTML = `${charCount}/${maxChars}`;
            if (charCount > maxChars) {
                counter.style.color = 'red';
            } else {
                counter.style.color = 'black';
            }
        });
    </script>
</head>

<body>
    <section>
        <header class="header">
            <img class="logo_sncf" src="/Images/logo.news.png" alt="logo_sncf" />
            <div class="presentation">
                <h1 class="titre_principal">SNCF TICKETING</h1>
            </div>
            <nav class="nav">
                <li><a href="/HTML/Page_utilisateur.html">Se connecter</a></li>
                <li><a href="/HTML/page_creation_profil.html">Créer un compte</a></li>
            </nav>
        </header>

        <div class="Bienvenue">
            <h2 class="titre2">
                <span style="color: #00205b;">Bienvenue sur la page CONTACTS</span>
                <span style="color:#82BE00;"> SNCF Ticketing </span>
            </h2>
        </div>
        <div class="BlocGénéral">
            <form id="contactForm" method="POST" action="process_form.php">
                <h1>Contactez-nous</h1>
                <div class="separation"></div>
                <div class="corps-formulaire">
                    <div class="gauche">
                        <div class="boite">
                            <label for="nom">Votre nom</label>
                            <input type="text" name="nom" id="nom" placeholder="Entrez votre nom">
                        </div>
                        <div class="boite">
                            <label for="prenom">Votre prénom</label>
                            <input type="text" name="prenom" id="prenom" placeholder="Entrez votre prénom">
                        </div>
                        <div class="boite">
                            <label for="cp">Votre numéro de CP</label>
                            <input type="text" name="cp" id="cp" placeholder="Entrez votre numéro de CP">
                        </div>
                        <div class="boite">
                            <label for="email">Votre email</label>
                            <input type="email" name="email" id="email" placeholder="Entrez votre email">
                        </div>
                    </div>
                    <div class="droite">
                        <div class="boite">
                            <label for="message">Votre message</label>
                            <textarea name="message" id="message" placeholder="Écrivez votre message"></textarea>
                        </div>
                    </div>
                </div>
                <div class="pied-formulaire">
                    <button type="submit" onclick="return validateForm();">Envoyer</button>
                </div>
            </form>
        </div>

        <footer class="footer">
            <img class="logo_sncf2" src="/Images/essai.logo.png" alt="logo_sncf2" />
            <div class="contenu_footer">
                <h3>SNCF Ticketing |
                    <a href="/version.html" class="footer-link">Version 1.1</a> |
                    <a href="/cgu.html" class="footer-link">CGU</a> |
                    <a href="/mentions-legales.html" class="footer-link">Mentions légales</a> |
                    <a href="/HTML/page_contacts.html" class="footer-link"> Contactez-nous</a> |
                    e-SNCF ©2024
                </h3>
            </div>

            <a href="/HTML/Page_accueil.html" class="icone-home">
                <i class="fas fa-home"></i> Accueil
            </a>
        </footer>
    </section>
</body>

</html>
